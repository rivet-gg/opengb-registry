{
  "name": "Lobbies",
  "description": "Lobby & player management.",
  "icon": "game-board",
  "tags": [
    "core", "multiplayer"
  ],
  "authors": [
    "NathanFlurry"
  ],
  "status": "stable",
  "scripts": {
    "create": {
      "name": "Create Lobby",
      "description": "Creates a new lobby on-demand.",
      "public": true
    },
    "destroy": {
      "name": "Destroy Lobby",
      "description": "Destroys an existing lobby.",
      "public": true
    },
    "find_or_create": {
      "name": "Find Or Create Lobby",
      "description": "Finds a lobby or creates one if there are no available spots for players.",
      "public": true
    },
    "join": {
      "name": "Join Lobby",
      "description": "Add a player to an existing lobby.",
      "public": true
    },
    "list": {
      "name": "List Lobbies",
      "description": "List & query all lobbies.",
      "public": true
    },
    "set_lobby_ready": {
      "name": "Set Lobby Ready",
      "description": "Called on lobby startup after initiation to notify it can start accepting player. This should be called after operations like loading maps are complete.",
      "public": true
    },
    "set_player_connected": {
      "name": "Set Player Connected",
      "description": "Called when a player connects to the lobby.",
      "public": true
    },
    "set_player_disconnected": {
      "name": "Set Player Disconnected",
      "description": "Called when a player disconnects from the lobby.",
      "public": true
    },
    "find": {
      "name": "Find Lobby",
      "description": "Finds an existing lobby with a given query. This will not create a new lobby, see `find_or_create` instead.",
      "public": true
    },
    "force_gc": {
      "name": "Force Garbage Collection",
      "description": "Rarely used. Forces the matchmaker to purge lobbies & players."
    }
  },
  "actors": {
    "lobby_manager": {}
  },
  "errors": {
    "lobby_not_found": {
      "name": "Lobby Not Found",
      "description": "Lobby not found."
    },
    "lobby_create_missing_players": {
      "name": "Lobby Create Missing Players",
      "description": "When creating a lobby with `config.lobbies.autoDestroyWhenEmpty`, a lobby must be created with players in order to avoid creating an empty lobby."
    },
    "lobby_full": {
      "name": "Lobby Full",
      "description": "No more players can join this lobby."
    },
    "more_players_than_max": {
      "name": "More Players Than Max",
      "description": "More players were passed to the create lobby than the number of max players in a lobby."
    },
    "lobby_already_ready": {
      "name": "Lobby Already Ready",
      "description": "Lobby already set as ready."
    },
    "player_already_connected": {
      "name": "Player Already Connected",
      "description": "The player has already connected to this server. This error helps mitigate botting attacks by only allowing one scoket to connect to a game server for every player."
    },
    "player_disconnected": {
      "name": "Player Disconnected",
      "description": "The player has already disconnected from the server. Create a new player for the specified lobby using the `join` script."
    },
    "no_matching_lobbies": {
      "name": "No Matching Lobbies",
      "description": "No lobbies matched the given query."
    },
    "too_many_players_for_ip": {
      "name": "Too Many Players For IP",
      "description": "The player has too many existing players for the given IP."
    }
  },
  "dependencies": {
    "tokens": {}
  },
  "defaultConfig": {
    "lobbies": {
      "destroyOnEmptyAfter": 60000,
      "unreadyExpireAfter": 300000,
      "maxPlayers": 16,
      "maxPlayersDirect": 16,
      "enableCreate": false,
      "enableDestroy": false,
      "enableFind": true,
      "enableFindOrCreate": true,
      "enableJoin": true,
      "enableList": true
    },
    "lobbyRules": [],
    "players": {
      "maxPerIp": 8,
      "maxUnconnected": 128,
      "unconnectedExpireAfter": 60000,
      "autoDestroyAfter": 4147200000
    }
  }
}
